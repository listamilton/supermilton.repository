import xbmc
import time
import urllib2
from pulsar.config import PULSARD_HOST

def library_thread():
    limit = 8 * 60 * 60
    count = limit - 60
    while not xbmc.abortRequested:
        # 8 hours passed - Update Library
        if count >= limit:
            count = 0
            try:
                urllib2.urlopen(PULSARD_HOST + "/library/update")
            except:
                pass
        time.sleep(3)
        count += 3
